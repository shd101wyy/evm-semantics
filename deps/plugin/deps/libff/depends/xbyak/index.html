<!DOCTYPE html>
<html lang="en">
  <head>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
/>
<meta
  name="description"
  content="K Semantics of the Ethereum Virtual Machine (EVM)"
/>
<meta name="keywords" content="runtime, verification, rv, k" />
<meta name="author" content="EVM Semantics | Runtime Verification Inc" />
<meta name="robots" content="index, follow" />

<!--favicon icon-->
<link rel="icon" type="image/png" href="../../../../../../assets/img/favicon.ico" />

<title>KEVM: Semantics of EVM in K | evm-semantics</title>

<!-- <base href="/k/" /> -->

<!--web fonts-->
<link
  href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,700,800"
  rel="stylesheet"
/>
<link
  href="https://fonts.googleapis.com/css?family=Lora:400i"
  rel="stylesheet"
/>

<link
  href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"
  rel="stylesheet"
/>

<link href="../../../../../../assets/css/index.css" rel="stylesheet" />

<!--[if (gt IE 9) |!(IE)]><!-->
<!--<link rel="stylesheet" href="/assets/vendor/custom-nav/css/effects/fade-menu.css"/>-->
<!-- <link rel="stylesheet" href="../../../../../../assets/k/vl-nav/css/effects/slide-menu.css" /> -->
<!--<![endif]-->

  </head>

  <body>
<header
  class="navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar"
>
  <a class="logo-link" href="../../../../../../index.html"> EVM Semantics </a>
  <ul class="navbar-nav ml-md-auto">
    <li class="nav-item">
      <a
        class="nav-link pl-2 pr-1 mx-1 py-3 my-n2"
        href="https://github.com/kframework/evm-semantics"
        target="_blank"
        rel="noopener"
        aria-label="GitHub"
      >
        <i class="fab fa-github"></i>
      </a>
    </li>
  </ul>
  <!--
  <a
    class="btn btn-rv-blue d-none d-lg-inline-block mb-3 mb-md-0 ml-md-3"
    href="../../../../../../downloads"
    >Download</a
  >
  -->
</header>


    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 bd-sidebar mb-3">
  <form
    role="search"
    class="bd-search d-flex align-items-center justify-content-between"
  >
    <input
      type="search"
      class="form-control"
      placeholder="Search..."
      aria-label="Search for..."
      autocomplete="false"
      id="search-box"
    />
    <button
      class="btn bd-search-docs-toggle d-md-none p-0 ml-3 collapsed"
      type="button"
      aria-label="Toggle docs navigation"
      style="font-size: 1.4rem"
    >
      <i class="fas fa-bars"></i>
    </button>
  </form>
  <nav class="collapse bd-links" aria-label="Main navigation">
    <div class="bd-toc-item">
      <a class="bd-toc-link" href="../../../../../../">Homepage</a>
      <a class="bd-toc-link" href="../../../../../../INSTALL">Install</a>
    </div>
  </nav>
</div>

        <main
          class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content"
          role="main"
        >
          <div class="markdown-preview"><html><head></head><body><h1 id="xbyak-5.63-%3B-jit-assembler-for-x86(ia32)%2C-x64(amd64%2C-x86-64)-by-c%2B%2B">Xbyak 5.63 ; JIT assembler for x86(IA32), x64(AMD64, x86-64) by C++</h1>
<h2 id="abstract">Abstract</h2>
<p>This is a header file which enables dynamically to assemble x86(IA32), x64(AMD64, x86-64) mnemonic.</p>
<h2 id="feature">Feature</h2>
<p>header file only
you can use Xbyak&apos;s functions at once if xbyak.h is included.</p>
<h3 id="supported-instructions-sets">Supported Instructions Sets</h3>
<p>MMX/MMX2/SSE/SSE2/SSE3/SSSE3/SSE4/FPU(<em>partial</em>)/AVX/AVX2/FMA/VEX-encoded GPR/AVX-512</p>
<h3 id="supported-os">Supported OS</h3>
<ul>
<li>Windows Xp, Vista, Windows 7(32bit, 64bit)</li>
<li>Linux(32bit, 64bit)</li>
<li>Intel Mac OSX</li>
</ul>
<h3 id="supported-compilers">Supported Compilers</h3>
<ul>
<li>Visual Studio C++ VC2012 or later</li>
<li>gcc 4.7 or later</li>
<li>clang 3.3</li>
<li>cygwin gcc 4.5.3</li>
<li>icc 7.2</li>
</ul>
<blockquote>
<p>Note: Xbyak uses and(), or(), xor(), not() functions, so &quot;-fno-operator-names&quot; option is required on gcc.
Or define XBYAK_NO_OP_NAMES and use and_(), or_(), xor_(), not_() instead of them.
and_(), or_(), xor_(), not_() are always available.</p>
</blockquote>
<h2 id="install">Install</h2>
<p>The following files are necessary. Please add the path to your compile directories.</p>
<ul>
<li>xbyak.h</li>
<li>xbyak_mnemonic.h</li>
</ul>
<p>Linux:</p>
<pre><code>make install
</code></pre>
<p>These files are copied into /usr/local/include/xbyak</p>
<h2 id="new-feature">New Feature</h2>
<p>Add support for AVX-512 instruction set.</p>
<h2 id="syntax">Syntax</h2>
<p>Make Xbyak::CodeGenerator and make the class method and get the function
pointer by calling cgetCode() and casting the return value.</p>
<pre><code>NASM              Xbyak
mov eax, ebx  --&gt; mov(eax, ebx);
inc ecx           inc(ecx);
ret           --&gt; ret();
</code></pre>
<h3 id="addressing">Addressing</h3>
<pre><code>(ptr|dword|word|byte) [base + index * (1|2|4|8) + displacement]
                      [rip + 32bit disp] ; x64 only

NASM                   Xbyak
mov eax, [ebx+ecx] --&gt; mov (eax, ptr[ebx+ecx]);
test byte [esp], 4 --&gt; test (byte [esp], 4);
</code></pre>
<p>How to use Selector(Segment Register)</p>
<blockquote>
<p>Note: Segment class is not derived from Operand.</p>
</blockquote>
<pre class="language-text"><code>mov eax, [fs:eax] --&gt; putSeg(fs); mov(eax, ptr [eax]);
mov ax, cs        --&gt; mov(ax, cs);
</code></pre>
<blockquote>
<p>you can use ptr for almost memory access unless you specify the size of memory.</p>
</blockquote>
<blockquote>
<p>dword, word and byte are member variables, then don&apos;t use dword as unsigned int, for example.</p>
</blockquote>
<h3 id="avx">AVX</h3>
<pre><code>vaddps(xmm1, xmm2, xmm3); // xmm1 &lt;- xmm2 + xmm3
vaddps(xmm2, xmm3, ptr [rax]); // use ptr to access memory
vgatherdpd(xmm1, ptr [ebp+123+xmm2*4], xmm3);
</code></pre>
<p><em>Remark</em>
The omitted destination syntax as the following ss disabled.</p>
<pre class="language-text"><code>    vaddps(xmm2, xmm3); // xmm2 &lt;- xmm2 + xmm3
</code></pre>
<p>define <code>XBYAK_ENABLE_OMITTED_OPERAND</code> if you use it for backward compatibility.
But the newer version will not support it.</p>
<h3 id="avx-512">AVX-512</h3>
<pre class="language-text"><code>vaddpd zmm2, zmm5, zmm30                --&gt; vaddpd(zmm2, zmm5, zmm30);
vaddpd xmm30, xmm20, [rax]              --&gt; vaddpd(xmm30, xmm20, ptr [rax]);
vaddps xmm30, xmm20, [rax]              --&gt; vaddps(xmm30, xmm20, ptr [rax]);
vaddpd zmm2{k5}, zmm4, zmm2             --&gt; vaddpd(zmm2 | k5, zmm4, zmm2);
vaddpd zmm2{k5}{z}, zmm4, zmm2          --&gt; vaddpd(zmm2 | k5 | T_z, zmm4, zmm2);
vaddpd zmm2{k5}{z}, zmm4, zmm2,{rd-sae} --&gt; vaddpd(zmm2 | k5 | T_z, zmm4, zmm2 | T_rd_sae);
                                            vaddpd(zmm2 | k5 | T_z | T_rd_sae, zmm4, zmm2); // the position of `|` is arbitrary.
vcmppd k4{k3}, zmm1, zmm2, {sae}, 5     --&gt; vcmppd(k4 | k3, zmm1, zmm2 | T_sae, 5);

vaddpd xmm1, xmm2, [rax+256]            --&gt; vaddpd(xmm1, xmm2, ptr [rax+256]);
vaddpd xmm1, xmm2, [rax+256]{1to2}      --&gt; vaddpd(xmm1, xmm2, ptr_b [rax+256]);
vaddpd ymm1, ymm2, [rax+256]{1to4}      --&gt; vaddpd(ymm1, ymm2, ptr_b [rax+256]);
vaddpd zmm1, zmm2, [rax+256]{1to8}      --&gt; vaddpd(zmm1, zmm2, ptr_b [rax+256]);
vaddps zmm1, zmm2, [rax+rcx*8+8]{1to16} --&gt; vaddps(zmm1, zmm2, ptr_b [rax+rcx*8+8]);
vmovsd [rax]{k1}, xmm4                  --&gt; vmovsd(ptr [rax] | k1, xmm4);

vcvtpd2dq xmm16, oword [eax+33]         --&gt; vcvtpd2dq(xmm16, xword [eax+33]); // use xword for m128 instead of oword
                                            vcvtpd2dq(xmm16, ptr [eax+33]); // default xword
vcvtpd2dq xmm21, [eax+32]{1to2}         --&gt; vcvtpd2dq(xmm21, ptr_b [eax+32]);
vcvtpd2dq xmm0, yword [eax+33]          --&gt; vcvtpd2dq(xmm0, yword [eax+33]); // use yword for m256
vcvtpd2dq xmm19, [eax+32]{1to4}         --&gt; vcvtpd2dq(xmm19, yword_b [eax+32]); // use yword_b to broadcast

vfpclassps k5{k3}, zword [rax+64], 5    --&gt; vfpclassps(k5|k3, zword [rax+64], 5); // specify m512
vfpclasspd k5{k3}, [rax+64]{1to2}, 5    --&gt; vfpclasspd(k5|k3, xword_b [rax+64], 5); // broadcast 64-bit to 128-bit
vfpclassps k5{k3}, [rax+64]{1to4}, 5    --&gt; vfpclassps(k5|k3, yword_b [rax+64], 5); // broadcast 64-bit to 256-bit
</code></pre>
<p>Remark</p>
<ul>
<li>k1, ..., k7 are new opmask registers.</li>
<li>use <code>| T_z</code>, <code>| T_sae</code>, <code>| T_rn_sae</code>, <code>| T_rd_sae</code>, <code>| T_ru_sae</code>, <code>| T_rz_sae</code> instead of <code>,{z}</code>, <code>,{sae}</code>, <code>,{rn-sae}</code>, <code>,{rd-sae}</code>, <code>,{ru-sae}</code>, <code>,{rz-sae}</code> respectively.</li>
<li><code>k4 | k3</code> is different from <code>k3 | k4</code>.</li>
<li>use <code>ptr_b</code> for broadcast <code>{1toX}</code>. X is automatically determined.</li>
<li>specify xword/yword/zword(_b) for m128/m256/m512 if necessary.</li>
</ul>
<h3 id="label">Label</h3>
<pre><code>L(&quot;L1&quot;);
  jmp (&quot;L1&quot;);

  jmp (&quot;L2&quot;);
  ...
  a few mnemonics(8-bit displacement jmp)
  ...
L(&quot;L2&quot;);

  jmp (&quot;L3&quot;, T_NEAR);
  ...
  a lot of mnemonics(32-bit displacement jmp)
  ...
L(&quot;L3&quot;);
</code></pre>
<blockquote>
<p>Call hasUndefinedLabel() to verify your code has no undefined label.
you can use a label for immediate value of mov like as mov (eax, &quot;L2&quot;);</p>
</blockquote>
<h4 id="1.-support-%40%40%2C-%40f%2C-%40b-like-masm">1. support @@, @f, @b like MASM</h4>
<pre><code>L(&quot;@@&quot;); // &lt;A&gt;
  jmp(&quot;@b&quot;); // jmp to &lt;A&gt;
  jmp(&quot;@f&quot;); // jmp to &lt;B&gt;
L(&quot;@@&quot;); // &lt;B&gt;
  jmp(&quot;@b&quot;); // jmp to &lt;B&gt;
  mov(eax, &quot;@b&quot;);
  jmp(eax); // jmp to &lt;B&gt;
</code></pre>
<h4 id="2.-localization-of-label-by-calling-inlocallabel()%2C-outlocallabel().">2. localization of label by calling inLocalLabel(), outLocallabel().</h4>
<p>labels begining of period between inLocalLabel() and outLocalLabel()
are dealed with local label.
inLocalLabel() and outLocalLabel() can be nested.</p>
<pre><code>void func1()
{
    inLocalLabel();
  L(&quot;.lp&quot;); // &lt;A&gt; ; local label
    ...
    jmp(&quot;.lp&quot;); // jmpt to &lt;A&gt;
  L(&quot;aaa&quot;); // global label
    outLocalLabel();
}

void func2()
{
    inLocalLabel();
  L(&quot;.lp&quot;); // &lt;B&gt; ; local label
    func1();
    jmp(&quot;.lp&quot;); // jmp to &lt;B&gt;
    inLocalLabel();
}
</code></pre>
<h3 id="label-class">Label class</h3>
<p>L() and jxx() functions support a new Label class.</p>
<pre><code>  Label label1, label2;
L(label1);
  ...
  jmp(label1);
  ...
  jmp(label2);
  ...
L(label2);
</code></pre>
<p>Moreover, assignL(dstLabel, srcLabel) method binds dstLabel with srcLabel.</p>
<pre><code>  Label label1, label2;
L(label1);
  ...
  jmp(label2);
  ...
  assignL(label2, label1); // label2 &lt;= label1
</code></pre>
<p>The above jmp opecode jumps label1.</p>
<ul>
<li>Restriction:</li>
<li>srcLabel must be used in L().</li>
<li>dstLabel must not be used in L().</li>
</ul>
<p>Label::getAddress() returns the address specified by the label instance and 0 if not specified.</p>
<pre class="language-text"><code>// not AutoGrow mode
Label  label;
assert(label.getAddress() == 0);
L(label);
assert(label.getAddress() == getCurr());
</code></pre>
<h3 id="rip">Rip</h3>
<pre class="language-text"><code>Label label;
mov(eax, ptr [rip + label]); // eax = 4
...

L(label);
dd(4);
</code></pre>
<pre class="language-text"><code>int x;
...
  mov(eax, ptr[rip + &amp;x]); // throw exception if the difference between &amp;x and current position is larger than 2GiB
</code></pre>
<h3 id="code-size">Code size</h3>
<p>The default max code size is 4096 bytes. Please set it in constructor of CodeGenerator() if you want to use large size.</p>
<pre><code>class Quantize : public Xbyak::CodeGenerator {
public:
  Quantize()
    : CodeGenerator(8192)
  {
  }
  ...
};
</code></pre>
<h3 id="use-user-allocated-memory">use user allocated memory</h3>
<p>You can make jit code on prepaired memory.</p>
<pre><code>class Sample : public Xbyak::CodeGenerator {
public:
    Sample(void *userPtr, size_t size)
        : Xbyak::CodeGenerator(size, userPtr)
    {
        ...
    }
};

const size_t codeSize = 1024;
uint8 buf[codeSize + 16];

// get 16-byte aligned address
uint8 *p = Xbyak::CodeArray::getAlignedAddress(buf);

// append executable attribute to the memory
Xbyak::CodeArray::protect(p, codeSize, true);

// construct your jit code on the memory
Sample s(p, codeSize);
</code></pre>
<blockquote>
<p>See <em>sample/test0.cpp</em></p>
</blockquote>
<h2 id="autogrow">AutoGrow</h2>
<p>Under <code>AutoGrow</code> mode, Xbyak extends memory automatically if necessary.
Call ready() before calling getCode() to calc address of jmp.</p>
<pre class="language-text"><code>    struct Code : Xbyak::CodeGenerator {
      Code()
        : Xbyak::CodeGenerator(&lt;default memory size&gt;, Xbyak::AutoGrow)
      {
         ...
      }
    };
    Code c;
    c.ready(); // Don&apos;t forget to call this function
</code></pre>
<blockquote>
<p>Don&apos;t use the address returned by getCurr() before calling ready().
It may be invalid address.
RESTRICTION : rip addressing is not supported in AutoGrow</p>
</blockquote>
<h2 id="macro">Macro</h2>
<ul>
<li><strong>XBYAK32</strong> is defined on 32bit.</li>
<li><strong>XBYAK64</strong> is defined on 64bit.</li>
<li><strong>XBYAK64_WIN</strong> is defined on 64bit Windows(VC)</li>
<li><strong>XBYAK64_GCC</strong> is defined on 64bit gcc, cygwin</li>
<li>define <strong>XBYAK_NO_OP_NAMES</strong> on gcc without <code>-fno-operator-names</code></li>
<li>define <strong>XBYAK_ENABLE_OMITTED_OPERAND</strong> if you use omitted destination such as <code>vaddps(xmm2, xmm3);</code>(duplicated in the future)</li>
<li>define <strong>XBYAK_UNDEF_JNL</strong> if Bessel function jnl is defined as macro</li>
</ul>
<h2 id="sample">Sample</h2>
<ul>
<li>test0.cpp ; tiny sample of Xbyak(x86, x64)</li>
<li>quantize.cpp ; JIT optimized quantization by fast division(x86 only)</li>
<li>calc.cpp ; assemble and estimate a given polynomial(x86, x64)</li>
<li>bf.cpp ; JIT brainfuck(x86, x64)</li>
</ul>
<h2 id="license">License</h2>
<p>modified new BSD License
<a href="http://opensource.org/licenses/BSD-3-Clause" target="_blank" rel="noopener">http://opensource.org/licenses/BSD-3-Clause</a></p>
<p>The files under test/cybozu/ are copied from cybozulib(<a href="https://github.com/herumi/cybozulib/" target="_blank" rel="noopener">https://github.com/herumi/cybozulib/</a>),
which is licensed by BSD-3-Clause and are used for only tests.
The header files under xbyak/ are independent of cybozulib.</p>
<h2 id="history">History</h2>
<ul>
<li>2018/Feb/14 ver 5.63 fix Cpu::setCacheHierarchy() and fix EvexModifierZero for clang&lt;3.9(thanks to mgouicem)</li>
<li>2018/Feb/13 ver 5.62 Cpu::setCacheHierarchy() by mgouicem and rsdubtso</li>
<li>2018/Feb/07 ver 5.61 vmov* supports mem{k}{z}(I forgot it)</li>
<li>2018/Jan/24 ver 5.601 add xword, yword, etc. into Xbyak::util namespace</li>
<li>2018/Jan/05 ver 5.60 support AVX-512 for Ice lake(319433-030.pdf)</li>
<li>2017/Aug/22 ver 5.53 fix mpx encoding, add bnd() prefix</li>
<li>2017/Aug/18 ver 5.52 fix align (thanks to MerryMage)</li>
<li>2017/Aug/17 ver 5.51 add multi-byte nop and align() uses it(thanks to inolen)</li>
<li>2017/Aug/08 ver 5.50 add mpx(thanks to magurosan)</li>
<li>2017/Aug/08 ver 5.45 add sha(thanks to magurosan)</li>
<li>2017/Aug/08 ver 5.44 add prefetchw(thanks to rsdubtso)</li>
<li>2017/Jul/12 ver 5.432 reduce warnings of PVS studio</li>
<li>2017/Jul/09 ver 5.431 fix hasRex() (no affect) (thanks to drillsar)</li>
<li>2017/May/14 ver 5.43 fix CodeGenerator::resetSize() (thanks to gibbed)</li>
<li>2017/May/13 ver 5.42 add movs{b,w,d,q}</li>
<li>2017/Jan/26 ver 5.41 add prefetchwt1 and support for scale == 0(thanks to rsdubtso)</li>
<li>2016/Dec/14 ver 5.40 add Label::getAddress() method to get the pointer specified by the label</li>
<li>2016/Dec/09 ver 5.34 fix handling of negative offsets when encoding disp8N(thanks to rsdubtso)</li>
<li>2016/Dec/08 ver 5.33 fix encoding of vpbroadcast{b,w,d,q}, vpinsr{b,w}, vpextr{b,w} for disp8N</li>
<li>2016/Dec/01 ver 5.32 rename __xgetbv() to _xgetbv() to support clang for Visual Studio(thanks to freiro)</li>
<li>2016/Nov/27 ver 5.31 rename AVX512_4VNNI to AVX512_4VNNIW</li>
<li>2016/Nov/27 ver 5.30 add AVX512_4VNNI, AVX512_4FMAPS instructions(thanks to rsdubtso)</li>
<li>2016/Nov/26 ver 5.20 add detection of AVX512_4VNNI and AVX512_4FMAPS(thanks to rsdubtso)</li>
<li>2016/Nov/20 ver 5.11 lost vptest for ymm(thanks to gregory38)</li>
<li>2016/Nov/20 ver 5.10 add addressing [rip+&amp;var]</li>
<li>2016/Sep/29 ver 5.03 fix detection ERR_INVALID_OPMASK_WITH_MEMORY(thanks to PVS-Studio)</li>
<li>2016/Aug/15 ver 5.02 xbyak does not include xbyak_bin2hex.h</li>
<li>2016/Aug/15 ver 5.011 fix detection of version of gcc 5.4</li>
<li>2016/Aug/03 ver 5.01 disable omitted operand</li>
<li>2016/Jun/24 ver 5.00 support avx-512 instruction set</li>
<li>2016/Jun/13 avx-512 add mask instructions</li>
<li>2016/May/05 ver 4.91 add detection of AVX-512 to Xbyak::util::Cpu</li>
<li>2016/Mar/14 ver 4.901 comment to ready() function(thanks to skmp)</li>
<li>2016/Feb/04 ver 4.90 add jcc(const void *addr);</li>
<li>2016/Jan/30 ver 4.89 vpblendvb supports ymm reg(thanks to John Funnell)</li>
<li>2016/Jan/24 ver 4.88 lea, cmov supports 16-bit register(thanks to whyisthisfieldhere)</li>
<li>2015/Oct/05 ver 4.87 support segment selectors</li>
<li>2015/Aug/18 ver 4.86 fix [rip + label] addressing with immediate value(thanks to whyisthisfieldhere)</li>
<li>2015/Aug/10 ver 4.85 Address::operator==() is not correct(thanks to inolen)</li>
<li>2015/Jun/22 ver 4.84 call() support variadic template if available(thanks to randomstuff)</li>
<li>2015/Jun/16 ver 4.83 support movbe(thanks to benvanik)</li>
<li>2015/May/24 ver 4.82 support detection of F16C</li>
<li>2015/Apr/25 ver 4.81 fix the condition to throw exception for setSize(thanks to whyisthisfieldhere)</li>
<li>2015/Apr/22 ver 4.80 rip supports label(thanks to whyisthisfieldhere)</li>
<li>2015/Jar/28 ver 4.71 support adcx, adox, cmpxchg, rdseed, stac</li>
<li>2014/Oct/14 ver 4.70 support MmapAllocator</li>
<li>2014/Jun/13 ver 4.62 disable warning of VC2014</li>
<li>2014/May/30 ver 4.61 support bt, bts, btr, btc</li>
<li>2014/May/28 ver 4.60 support vcvtph2ps, vcvtps2ph</li>
<li>2014/Apr/11 ver 4.52 add detection of rdrand</li>
<li>2014/Mar/25 ver 4.51 remove state information of unreferenced labels</li>
<li>2014/Mar/16 ver 4.50 support new Label</li>
<li>2014/Mar/05 ver 4.40 fix wrong detection of BMI/enhanced rep on VirtualBox</li>
<li>2013/Dec/03 ver 4.30 support Reg::cvt8(), cvt16(), cvt32(), cvt64()</li>
<li>2013/Oct/16 ver 4.21 label support std::string</li>
<li>2013/Jul/30 ver 4.20 [break backward compatibility] split Reg32e class into RegExp(base+index*scale+disp) and Reg32e(means Reg32 or Reg64)</li>
<li>2013/Jul/04 ver 4.10 [break backward compatibility] change the type of Xbyak::Error from enum to a class</li>
<li>2013/Jun/21 ver 4.02 add putL(LABEL) function to put the address of the label</li>
<li>2013/Jun/21 ver 4.01 vpsllw, vpslld, vpsllq, vpsraw, vpsrad, vpsrlw, vpsrld, vpsrlq support (ymm, ymm, xmm).
support vpbroadcastb, vpbroadcastw, vpbroadcastd, vpbroadcastq(thanks to Gabest).</li>
<li>2013/May/30 ver 4.00 support AVX2, VEX-encoded GPR-instructions</li>
<li>2013/Mar/27 ver 3.80 support mov(reg, &quot;label&quot;);</li>
<li>2013/Mar/13 ver 3.76 add cqo(), jcxz(), jecxz(), jrcxz()</li>
<li>2013/Jan/15 ver 3.75 add setSize() to modify generated code</li>
<li>2013/Jan/12 ver 3.74 add CodeGenerator::reset() ; add Allocator::useProtect()</li>
<li>2013/Jan/06 ver 3.73 use unordered_map if possible</li>
<li>2012/Dec/04 ver 3.72 eax, ebx, ... are member variables of CodeGenerator(revert), Xbyak::util::eax, ... are static const.</li>
<li>2012/Nov/17 ver 3.71 and_(), or_(), xor_(), not_() are available if XBYAK_NO_OP_NAMES is not defined.</li>
<li>2012/Nov/17 change eax, ebx, ptr and so on in CodeGenerator as static member and alias of them are defined in Xbyak::util.</li>
<li>2012/Nov/09 ver 3.70 XBYAK_NO_OP_NAMES macro is added to use and_() instead of and() (thanks to Mattias)</li>
<li>2012/Nov/01 ver 3.62 add fwait/fnwait/finit/fninit</li>
<li>2012/Nov/01 ver 3.61 add fldcw/fstcw</li>
<li>2012/May/03 ver 3.60 change interface of Allocator</li>
<li>2012/Mar/23 ver 3.51 fix userPtr mode</li>
<li>2012/Mar/19 ver 3.50 support AutoGrow mode</li>
<li>2011/Nov/09 ver 3.05 fix bit property of rip addresing / support movsxd</li>
<li>2011/Aug/15 ver 3.04 fix dealing with imm8 such as add(dword [ebp-8], 0xda); (thanks to lolcat)</li>
<li>2011/Jun/16 ver 3.03 fix __GNUC_PREREQ macro for Mac gcc(thanks to t_teruya)</li>
<li>2011/Apr/28 ver 3.02 do not use xgetbv on Mac gcc</li>
<li>2011/May/24 ver 3.01 fix typo of OSXSAVE</li>
<li>2011/May/23 ver 3.00 add vcmpeqps and so on</li>
<li>2011/Feb/16 ver 2.994 beta add vmovq for 32-bit mode(I forgot it)</li>
<li>2011/Feb/16 ver 2.993 beta remove cvtReg to avoid thread unsafe</li>
<li>2011/Feb/10 ver 2.992 beta support one argument syntax for fadd like nasm</li>
<li>2011/Feb/07 ver 2.991 beta fix pextrw reg, xmm, imm(Thanks to Gabest)</li>
<li>2011/Feb/04 ver 2.99 beta support AVX</li>
<li>2010/Dec/08 ver 2.31 fix ptr [rip + 32bit offset], support rdtscp</li>
<li>2010/Oct/19 ver 2.30 support pclmulqdq, aesdec, aesdeclast, aesenc, aesenclast, aesimc, aeskeygenassist</li>
<li>2010/Jun/07 ver 2.29 fix call(<label>)</label></li>
<li>2010/Jun/17 ver 2.28 move some member functions to public</li>
<li>2010/Jun/01 ver 2.27 support encoding of mov(reg64, imm) like yasm(not nasm)</li>
<li>2010/May/24 ver 2.26 fix sub(rsp, 1000)</li>
<li>2010/Apr/26 ver 2.25 add jc/jnc(I forgot to implement them...)</li>
<li>2010/Apr/16 ver 2.24 change the prototype of rewrite() method</li>
<li>2010/Apr/15 ver 2.23 fix align() and xbyak_util.h for Mac</li>
<li>2010/Feb/16 ver 2.22 fix inLocalLabel()/outLocalLabel()</li>
<li>2009/Dec/09 ver 2.21 support cygwin(gcc 4.3.2)</li>
<li>2009/Nov/28 support a part of FPU</li>
<li>2009/Jun/25 fix mov(qword[rax], imm); (thanks to Martin)</li>
<li>2009/Mar/10 fix redundant REX.W prefix on jmp/call reg64</li>
<li>2009/Feb/24 add movq reg64, mmx/xmm; movq mmx/xmm, reg64</li>
<li>2009/Feb/13 movd(xmm7, dword[eax]) drops 0x66 prefix (thanks to Gabest)</li>
<li>2008/Dec/30 fix call in short relative address(thanks to kato san)</li>
<li>2008/Sep/18 support @@, @f, @b and localization of label(thanks to nobu-q san)</li>
<li>2008/Sep/18 support (ptr[rip + 32bit offset]) (thanks to Dango-Chu san)</li>
<li>2008/Jun/03 fix align(). mov(ptr[eax],1) throws ERR_MEM_SIZE_IS_NOT_SPECIFIED.</li>
<li>2008/Jun/02 support memory interface allocated by user</li>
<li>2008/May/26 fix protect() to avoid invalid setting(thanks to shinichiro_h san)</li>
<li>2008/Apr/30 add cmpxchg16b, cdqe</li>
<li>2008/Apr/29 support x64</li>
<li>2008/Apr/14 code refactoring</li>
<li>2008/Mar/12 add bsr/bsf</li>
<li>2008/Feb/14 fix output of sub eax, 1234 (thanks to Robert)</li>
<li>2007/Nov/5  support lock, xadd, xchg</li>
<li>2007/Nov/2  support SSSE3/SSE4 (thanks to Dango-Chu san)</li>
<li>2007/Feb/4  fix the bug that exception doesn&apos;t occur under the condition which the offset of jmp mnemonic without T_NEAR is over 127.</li>
<li>2007/Jan/21 fix the bug to create address like [disp] select smaller representation for mov (eax|ax|al, [disp])</li>
<li>2007/Jan/4  first version</li>
</ul>
<h2 id="author">Author</h2>
<p>MITSUNARI Shigeo(<a href="mailto:herumi@nifty.com" target="_blank" rel="noopener">herumi@nifty.com</a>)</p>
</body></html></div>
        </main>
      </div>
    </div>
<footer class="app-footer text-md-left text-center">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-2 mb-md-0 mb-4">
        <span class="pr-md-5 pr-0 py-3">
          <a href="https://runtimeverification.com" target="_blank">
            <picture>
              <source
                srcset="../../../../../../assets/img/rv-logo-dark.png"
                media="(prefers-color-scheme: dark)"
              />
              <img
                class="pr-3 footer-logo"
                src="../../../../../../assets/img/rv-logo.png"
                alt="Runtime Verification Inc logo"
              />
            </picture>
          </a>
        </span>
      </div>
      <div class="col-md-6 mb-md-0 mb-4"></div>
      <div class="col-md-4 text-md-right">
        <p class="copyright">
          &copy; 2020 Runtime Verification Inc. All right reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-163311512-1"
></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "UA-163311512-1");
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Typist/1.2/typist.min.js"></script>
    <script src="../../../../../../assets/js/index.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-QL0D8HRYFW"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-QL0D8HRYFW");
    </script>
  </body>
</html>
